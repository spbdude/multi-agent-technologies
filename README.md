#  Децентрализованное вычисление среднего 

## Кратко о проекте
Цель — смоделировать работу распределённой системы агентов, которые **без централизованного сбора данных** находят **среднее арифметическое** своих начальных значений.  

---

## Задача 1. Децентрализованное среднее арифметическое

### Требования
- Количество агентов формируется случайно (`random`).
- Связи между агентами формируются случайно (`random`).
- Граф связей должен быть **связным** (иначе часть агентов не сможет узнать информацию остальных).
- Синхронизация должна выполняться **только сообщениями** (никаких “общих переменных” для координации).
- В консоль выводится:
  - итоговое найденное среднее,
  - истинное среднее (для контроля корректности),
  - абсолютная ошибка,
  - стоимость вычислений по конфигурации.

### Генерация данных
Каждый агент получает начальное значение (случайное число, например в диапазоне 0..100).  
Для проверки корректности программа отдельно вычисляет «истинное» среднее обычной формулой — это не участвует в работе агентов, а используется только для сравнения результата.

### Сеть агентов (случайная и связная)
Сеть — неориентированный граф:
- узлы: агенты `agent0`, `agent1`, ...
- ребра: “соседство”, по которому разрешён обмен сообщениями

Построение выполняется так:
1. создаётся случайное остовное дерево (гарантия связности),
2. затем добавляются дополнительные ребра, чтобы степени узлов обычно были около 2–3 (насколько это возможно).

### Протокол обмена и вычисления (consensus)
Работа идёт итерациями. На каждой итерации:
1. **Рассылка**: каждый агент отправляет своё текущее значение всем соседям.
2. **Приём**: каждый агент получает значения от всех соседей.
3. **Обновление**: агент пересчитывает своё значение по формуле average-consensus.

Остановка:
- процесс прекращается, когда максимальное изменение значений между итерациями становится меньше `eps` (например, `1e-6`),
- либо по ограничению `max_iters`.

---

## Модель стоимости
Стоимость считается суммарно по всем агентам и итерациям. Тарифы:

- **Отправка сообщения агенту-соседу**: `0.1`
- **Отправка сообщения “в центр”** (например, финальный отчёт): `1000`
- **Арифметическая операция** (`+`, `-`, `*`, `/`, …): `0.01`
- **Ячейка памяти** (хранение одного числа): `0.1`

В конце программа печатает развернутый отчёт: все счётчики и итоговую стоимость.

Реальный SPADE обычно использует XMPP-сервер; на Windows это нередко приводит к сложностям с настройкой и сетевыми портами, поэтому здесь используется **локальная имитация SPADE-подобного взаимодействия**: агенты обмениваются **только сообщениями** через очереди внутри процесса.
